{"ast":null,"code":"import _defineProperty from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/src/components/Campaign/ViewCampaign/QuestionnaireList.js\";\nimport React, { Component } from 'react';\nimport classes from './ViewCampaign.module.css';\nimport QuestionnaireComponent from './QuestionnaireComponent';\nimport EditQNR from './EditComponents/EditQNR';\nimport axios from '../../../axios';\n\nvar QuestionnaireList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(QuestionnaireList, _Component);\n\n  function QuestionnaireList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, QuestionnaireList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(QuestionnaireList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({}, _this.props, {\n      showAdd: false,\n      editedQuestion: ''\n    });\n\n    _this.onChangeHandler = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.editHandler = function (newQuestion, qKey) {\n      var newQuestionnaire = [];\n\n      for (var q in _this.state.questionnaire) {\n        var currentQ = _this.state.questionnaire[q];\n        console.log('EditHandler', currentQ.id, 'key : ', qKey);\n\n        if (currentQ.id != qKey) {\n          console.log('push', currentQ);\n          newQuestionnaire.push(currentQ);\n        } else {\n          var newQ = {\n            question: newQuestion,\n            answer: null,\n            id: qKey\n          };\n          console.log('push', newQ);\n          newQuestionnaire.push(newQ);\n        }\n      }\n\n      console.log(newQuestionnaire);\n\n      _this.setState(function (prevState) {\n        return {\n          questionnaire: newQuestionnaire\n        };\n      });\n\n      console.log('EditHandler');\n      axios.put('/campaigns/' + _this.props.id + '/questionnaire.json/', newQuestionnaire).then(function (response) {\n        console.log(\"Success\", _this.state.newQuestionnaire);\n      }).catch(function (error) {\n        console.log(\"Error\", error);\n      });\n    };\n\n    _this.addHandler = function (event) {\n      _this.setState(function (prevState) {\n        return {\n          showAdd: true\n        };\n      });\n    };\n\n    _this.addQuestionHandler = function (event) {\n      var newQuestion = {\n        question: _this.state.editedQuestion,\n        answer: null,\n        id: _this.state.questionnaire.length\n      };\n      console.log('[addQuestionHandler]', newQuestion);\n\n      _this.state.questionnaire.push(newQuestion);\n\n      _this.setState(function (prevState) {\n        return {\n          showAdd: false\n        };\n      });\n\n      axios.put('/campaigns/' + _this.props.id + '/questionnaire.json/', _this.state.questionnaire).then(function (response) {\n        console.log(\"Success\", _this.state.questionnaire);\n      }).catch(function (error) {\n        console.log(\"Error\", error);\n      });\n    };\n\n    _this.addedQuestionChange = function (event) {\n      _this.setState({\n        editedQuestion: event.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(QuestionnaireList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var questionnaire = this.state.questionnaire ? this.state.questionnaire.map(function (qnr) {\n        var question = React.createElement(QuestionnaireComponent, {\n          edit: _this2.editHandler,\n          key: qnr.id,\n          btnID: qnr.id,\n          question: qnr.question,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        });\n        return question;\n      }) : null;\n      var displayedComponent = this.state.showAdd ? React.createElement(EditQNR, {\n        editedQuestion: this.state.editedQuestion,\n        onClick: this.addQuestionHandler,\n        onChange: this.addedQuestionChange,\n        type: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }) : null;\n      return React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: [classes.QNRListSection, 'col-10', 'text-center'].join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: ['row'].join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: ['col-10', classes.Title].join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Questionnaire\"), React.createElement(\"button\", {\n        className: [classes.QNRCompBtn, 'btn', 'btn-danger', 'col-1'].join(' '),\n        onClick: this.addHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"+\")), displayedComponent, React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: ['text-center', classes.QNRListBody].join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, questionnaire))));\n    }\n  }]);\n\n  return QuestionnaireList;\n}(Component);\n\nexport default QuestionnaireList;","map":{"version":3,"sources":["/Users/wongeun/Desktop/2018Fall/supercanvasser/front/src/components/Campaign/ViewCampaign/QuestionnaireList.js"],"names":["React","Component","classes","QuestionnaireComponent","EditQNR","axios","QuestionnaireList","state","props","showAdd","editedQuestion","onChangeHandler","event","setState","target","name","value","editHandler","newQuestion","qKey","newQuestionnaire","q","questionnaire","currentQ","console","log","id","push","newQ","question","answer","prevState","put","then","response","catch","error","addHandler","addQuestionHandler","length","addedQuestionChange","map","qnr","displayedComponent","QNRListSection","join","Title","QNRCompBtn","QNRListBody"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport classes from './ViewCampaign.module.css'\nimport QuestionnaireComponent from './QuestionnaireComponent'\nimport EditQNR from './EditComponents/EditQNR'\nimport axios from '../../../axios'\n\nclass QuestionnaireList extends Component{\n\tstate={\n\t\t...this.props,\n\t\tshowAdd : false,\n\t\teditedQuestion : ''\n\t}\n\n\n\t\n\t\n\n\tonChangeHandler=(event)=>{\n\t\tthis.setState({[event.target.name] : event.target.value});\n\t}\n\n\t//Edit questionniare list from questionnaire component\n\teditHandler=(newQuestion, qKey)=>{\n\t\tlet newQuestionnaire = [];\n\n\t\tfor(let q in this.state.questionnaire){\n\t\t\tlet currentQ=this.state.questionnaire[q]\n\n\t\t\tconsole.log('EditHandler', currentQ.id, 'key : ',qKey);\n\t\t\tif(currentQ.id!=qKey){\n\t\t\t\tconsole.log('push', currentQ)\n\t\t\t\tnewQuestionnaire.push(currentQ);\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tlet newQ = {\n\t\t\t\t\tquestion : newQuestion, \n\t\t\t\t\tanswer:null,\n\t\t\t\t\tid:qKey\n\t\t\t\t}\n\t\t\t\tconsole.log('push', newQ)\n\t\t\t\tnewQuestionnaire.push(newQ);\t\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(newQuestionnaire);\n\t\tthis.setState((prevState)=>({\n\t\t\tquestionnaire : newQuestionnaire\n\t\t}));\n\n\n\t\tconsole.log('EditHandler');\n\t    \n\t    axios.put('/campaigns/'+this.props.id+'/questionnaire.json/', newQuestionnaire).then( response => {  \n\t              console.log(\"Success\", this.state.newQuestionnaire);\n\t      })\n\t      .catch( error => {\n\t          console.log(\"Error\", error);\n\t    });\n\t}\n\n\t//This method for showing textfield component\n\taddHandler=(event)=>{\n\t\tthis.setState((prevState)=>({\n\t\t\tshowAdd : true\n\t\t}));\n\t}\n\n\taddQuestionHandler = (event) =>{\n\t\t\n\t\tlet newQuestion = {\n\t\t\tquestion : this.state.editedQuestion,\n\t\t\tanswer : null,\n\t\t\tid : this.state.questionnaire.length\n\t\t} \n\t\tconsole.log('[addQuestionHandler]', newQuestion);\n\t\tthis.state.questionnaire.push(newQuestion);\n\t\tthis.setState((prevState)=>({\n\t\t\tshowAdd : false\n\t\t}));\n\n\t\taxios.put('/campaigns/'+this.props.id+'/questionnaire.json/', this.state.questionnaire).then( response => {  \n\t              console.log(\"Success\", this.state.questionnaire);\n\t      })\n\t      .catch( error => {\n\t          console.log(\"Error\", error);\n\t    });\n\n\t}\n\n\taddedQuestionChange=(event)=>{\n\t\tthis.setState({editedQuestion : event.target.value})\n\n\t}\n\n\n\trender(){\n\n\t\tlet questionnaire =  this.state.questionnaire? this.state.questionnaire.map(qnr =>{\n\t\t\tlet question = (<QuestionnaireComponent edit = {this.editHandler} key = {qnr.id} btnID = {qnr.id} question={qnr.question}/> )\n\t\t    return question;\n\t\t  }) : null;\n\n\t\tlet displayedComponent = this.state.showAdd? <EditQNR editedQuestion = {this.state.editedQuestion} onClick = {this.addQuestionHandler} onChange={this.addedQuestionChange} type='add' />  : null ;\n\t\treturn(\n\t\t\t<div className='row justify-content-center'>\n\t\t\t\t<div className = {[classes.QNRListSection, 'col-10', 'text-center'].join(' ')}>\n\t\t\t\t\t<div className = {['row'].join(' ')}>\n\t\t\t\t\t\t<h4 className={['col-10', classes.Title].join(' ')}>Questionnaire</h4> \n\t\t\t\t\t\t<button className = {[classes.QNRCompBtn,'btn', 'btn-danger', 'col-1'].join(' ')} onClick={this.addHandler}>+</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t{displayedComponent}\n\t\t\t\t\t<div className = 'row justify-content-center'>\n\t\t\t\t\t\t<div className = {['text-center', classes.QNRListBody].join(' ')}>\n\t\t\t\t\t\t\t{questionnaire}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default QuestionnaireList;"]},"metadata":{},"sourceType":"module"}