{"ast":null,"code":"import _toConsumableArray from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wongeun/Desktop/2018Fall/supercanvasser/front/src/containers/Manager/CreateCampaign/CreateCampaign.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport classes from './CreateCampaign.module.css';\nimport PageHead from '../../../components/Layout/PageHead/PageHead';\nimport CampaignTitle from '../../../components/Campaign/CreateCampaign/CampaignTitle';\nimport AddManager from '../../../components/Campaign/CreateCampaign/AddManager';\nimport AddedManagers from '../../../components/Campaign/CreateCampaign/AddedManagers';\nimport DateSection from '../../../components/Campaign/CreateCampaign/DateSection';\nimport TalkingPoint from '../../../components/Campaign/CreateCampaign/TalkingPoint';\nimport CreateQNR from '../../../components/Campaign/CreateCampaign/CreateQNR';\nimport AddedQuestionnaire from '../../../components/Campaign/CreateCampaign/AddedQuestionnaire';\nimport AddLocation from '../../../components/Campaign/CreateCampaign/AddLocation';\nimport AddedLocation from '../../../components/Campaign/CreateCampaign/AddedLocation';\nimport VisitDuration from '../../../components/Campaign/CreateCampaign/VisitDuration';\nimport axios from '../../../axios';\nimport Modal from '../../../components/UI/Modal/Modal';\n\nvar CreateCampaign =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateCampaign, _Component);\n\n  function CreateCampaign() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateCampaign);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateCampaign)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      campaignTitle: '',\n      managers: [],\n      startDate: moment(),\n      endDate: moment(),\n      talkingPoint: '',\n      questionnaire: [],\n      locations: [],\n      visitHour: '',\n      visitMin: '',\n      duration: '',\n      newManager: '',\n      newQuestionnaire: '',\n      newLocation: '',\n      id: null\n    };\n\n    _this.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleStartDateChange = function (newDate) {\n      _this.setState({\n        startDate: newDate\n      });\n    };\n\n    _this.handleEndDateChange = function (newDate) {\n      _this.setState({\n        endDate: newDate\n      });\n    };\n\n    _this.addManagerHandler = function (event) {\n      if (_this.state.newManager == '') {//show modal\n      } else {\n        var newManager = {\n          name: _this.state.newManager,\n          id: _this.state.managers.length\n        };\n\n        _this.setState(function (prevState) {\n          return {\n            managers: _toConsumableArray(prevState.managers).concat([newManager])\n          };\n        });\n\n        _this.setState({\n          newManager: ''\n        });\n      }\n    };\n\n    _this.addLocationHandler = function (address, event) {\n      var loc = '';\n\n      if (address.number == '' || address.street == '' || address.city == '' || address.state == '' || address.zipcode == '') {//show modal\n      } else {\n        loc = address.number + \", \" + address.street + \", \" + address.unit + \", \" + address.city + \", \" + address.state + \", \" + address.zipcode;\n        var newLocation = {\n          location: loc,\n          id: _this.state.locations.length\n        };\n\n        _this.setState(function (prevState) {\n          return {\n            locations: _toConsumableArray(prevState.locations).concat([newLocation])\n          };\n        });\n\n        _this.setState({\n          newLocation: ''\n        });\n      }\n    };\n\n    _this.addQuestionnaireHandler = function (event) {\n      if (_this.state.newQuestion == '') {//show modal\n      } else {\n        var newQuestion = {\n          question: _this.state.newQuestionnaire,\n          id: _this.state.questionnaire.length\n        };\n\n        _this.setState(function (prevState) {\n          return {\n            questionnaire: _toConsumableArray(prevState.questionnaire).concat([newQuestion])\n          };\n        });\n\n        _this.setState({\n          newQuestionnaire: ''\n        });\n      }\n    };\n\n    _this.removeQuestionnaireHandler = function (event) {\n      var removedList = _this.state.questionnaire.filter(function (ele) {\n        return ele.id != event.target.name;\n      });\n\n      _this.setState(function (prevState) {\n        return {\n          questionnaire: removedList\n        };\n      });\n    };\n\n    _this.removeLocationHandler = function (event) {\n      var removedList = _this.state.locations.filter(function (ele) {\n        return ele.id != event.target.name;\n      });\n\n      _this.setState(function (prevState) {\n        return {\n          locations: removedList\n        };\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      var campaign = {\n        campaignTitle: _this.state.campaignTitle,\n        managers: _this.state.managers,\n        startDate: _this.state.startDate._d.toDateString(),\n        endDate: _this.state.endDate._d.toDateString(),\n        talkingPoint: _this.state.talkingPoint,\n        questionnaire: _this.state.questionnaire,\n        locations: _this.state.locations,\n        duration: _this.state.visitHour + \"H \" + _this.state.visitMin + \"M\",\n        id: _this.state.id //If I use push it generates auto key\n        //axios.push ('/campaigns.json', campaign).then( response => {\n\n      };\n      console.log('[[Hi]', _this.state.id);\n      axios.put('/campaigns/' + _this.state.id + '.json/', campaign).then(function (response) {\n        console.log(\"campaignCreated\", campaign, \"response : \", response);\n\n        _this.props.signedin();\n      }).catch(function (error) {\n        console.log(\"Error\", error);\n      });\n      axios.put('/managers/0/campaigns/' + _this.state.id + '.json/', JSON.stringify(_this.state.id)).then(function (response) {\n        console.log(\"addCampaignToManager\");\n      }).catch(function (error) {\n        console.log(\"Error\", error);\n      }); // axios.put('/campaigns/length', this.state.id+1).then( response => {\n      // \tconsole.log(\"id is increased\");\n      // })\n      // .catch( error => {\n      //     console.log(\"Error\", error);\n      // });\n    };\n\n    return _this;\n  }\n\n  _createClass(CreateCampaign, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      ;\n      console.log(['Create Campaign Did Mount']);\n      var x = null;\n      axios.get('https://cse308-de3df.firebaseio.com/campaigns.json').then(function (response) {\n        x = response.data;\n\n        if (x != null) {\n          console.log(x.length);\n          var lastID = x[x.length - 1].id;\n\n          _this2.setState({\n            id: lastID + 1\n          });\n        } else {\n          _this2.setState({\n            id: 0\n          });\n        }\n      }); // \tconsole.log('Fail');\n      // })\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(['Create Campaign Render']);\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(PageHead, {\n        title: \"Create Campaign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(CampaignTitle, {\n        campaignTitle: this.state.campaignTitle,\n        onChange: function onChange(event) {\n          return _this3.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(AddManager, {\n        onChange: function onChange(event) {\n          return _this3.handleInputChange(event);\n        },\n        onClick: function onClick(event) {\n          return _this3.addManagerHandler(event);\n        },\n        manager: this.state.newManager,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }), React.createElement(AddedManagers, {\n        managers: this.state.managers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), React.createElement(DateSection, {\n        name: \"startDate\",\n        date: this.state.startDate,\n        onChange: this.handleStartDateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(DateSection, {\n        name: \"endDate\",\n        date: this.state.endDate,\n        onChange: this.handleEndDateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), React.createElement(TalkingPoint, {\n        talkingPoint: this.state.talkingPoint,\n        onChange: function onChange(event) {\n          return _this3.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(CreateQNR, {\n        questionnaire: this.state.newQuestionnaire,\n        onChange: function onChange(event) {\n          return _this3.handleInputChange(event);\n        },\n        onClick: function onClick(event) {\n          return _this3.addQuestionnaireHandler(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(AddedQuestionnaire, {\n        questionnaire: this.state.questionnaire,\n        onClick: this.removeQuestionnaireHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }), React.createElement(AddLocation, {\n        location: this.state.newLocation,\n        onChange: this.handleInputChange,\n        onClick: function onClick(event) {\n          return _this3.addLocationHandler(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), React.createElement(AddedLocation, {\n        locations: this.state.locations,\n        onClick: this.removeLocationHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), React.createElement(VisitDuration, {\n        visitHour: this.state.visitHour,\n        visitMin: this.state.visitMin,\n        onChange: function onChange(event) {\n          return _this3.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.Btn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-dark\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return CreateCampaign;\n}(Component);\n\nexport default CreateCampaign;","map":{"version":3,"sources":["/Users/wongeun/Desktop/2018Fall/supercanvasser/front/src/containers/Manager/CreateCampaign/CreateCampaign.js"],"names":["React","Component","moment","classes","PageHead","CampaignTitle","AddManager","AddedManagers","DateSection","TalkingPoint","CreateQNR","AddedQuestionnaire","AddLocation","AddedLocation","VisitDuration","axios","Modal","CreateCampaign","state","campaignTitle","managers","startDate","endDate","talkingPoint","questionnaire","locations","visitHour","visitMin","duration","newManager","newQuestionnaire","newLocation","id","handleInputChange","event","target","value","name","setState","handleStartDateChange","newDate","handleEndDateChange","addManagerHandler","length","prevState","addLocationHandler","address","loc","number","street","city","zipcode","unit","location","addQuestionnaireHandler","newQuestion","question","removeQuestionnaireHandler","removedList","filter","ele","removeLocationHandler","handleSubmit","campaign","_d","toDateString","console","log","put","then","response","props","signedin","catch","error","JSON","stringify","x","get","data","lastID","Btn"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport moment from 'moment'\n\nimport classes from './CreateCampaign.module.css'\n\nimport PageHead from '../../../components/Layout/PageHead/PageHead'\nimport CampaignTitle from '../../../components/Campaign/CreateCampaign/CampaignTitle'\nimport AddManager from '../../../components/Campaign/CreateCampaign/AddManager'\nimport AddedManagers from '../../../components/Campaign/CreateCampaign/AddedManagers'\nimport DateSection from '../../../components/Campaign/CreateCampaign/DateSection'\nimport TalkingPoint from '../../../components/Campaign/CreateCampaign/TalkingPoint'\n\nimport CreateQNR from '../../../components/Campaign/CreateCampaign/CreateQNR'\nimport AddedQuestionnaire from '../../../components/Campaign/CreateCampaign/AddedQuestionnaire'\nimport AddLocation from '../../../components/Campaign/CreateCampaign/AddLocation'\nimport AddedLocation from '../../../components/Campaign/CreateCampaign/AddedLocation'\nimport VisitDuration from '../../../components/Campaign/CreateCampaign/VisitDuration'\n\nimport axios from '../../../axios'\nimport Modal from '../../../components/UI/Modal/Modal'\n\nclass CreateCampaign extends Component{\n\tstate = {\n\t\tcampaignTitle : '',\n\t\tmanagers : [],\n\t\tstartDate : moment(),\n\t\tendDate : moment(),\n\t\ttalkingPoint : '',\n\t\tquestionnaire : [],\n\t\tlocations : [],\n\t\tvisitHour : '',\n\t\tvisitMin : '',\n\t\tduration : '',\n\t\tnewManager : '',\n\t\tnewQuestionnaire :'',\n\t\tnewLocation : '',\n\t\tid : null\n\t}\n\n\thandleInputChange = (event)=> {\n\t    const target = event.target;\n\t    const value = target.value;\n\t    const name = target.name;\n\t    \n   \t \tthis.setState({[name]: value });\n\t\t\n\t}\n\n\t handleStartDateChange = (newDate)=>{\n\t   \n\t    this.setState({\n\t      startDate: newDate\n\t    });\n\t  }\n\n\n\t handleEndDateChange = (newDate)=>{\n\t    this.setState({\n\t      endDate: newDate\n\t    });\n\t  }\n\n\t  addManagerHandler = (event) =>{\n\t  \t\tif(this.state.newManager==''){\n\t  \t\t\t//show modal\n\t  \t\t}else{\n\t\t  \t\tlet newManager = {\n\t\t  \t\t\tname : this.state.newManager, \n\t\t  \t\t\tid : this.state.managers.length\n\t\t  \t\t}\n\t\t  \t\tthis.setState((prevState)=>({\n\t\t  \t\t\tmanagers : [...prevState.managers, newManager]\n\t\t  \t\t}))\n\n\t\t  \t\tthis.setState({\n\t\t  \t\t\tnewManager : ''\n\t\t  \t\t});\n\t  \t\t}\n\t  }\n\n\t  addLocationHandler = (address, event) =>{\n\t  \t\tlet loc ='';\n\t  \t\tif(address.number=='' || address.street=='' || address.city=='' || address.state=='' || address.zipcode==''){\n\t  \t\t\t\t//show modal\n\t  \t\t} else{\n\t\t  \t\tloc = address.number +\", \"+ address.street + \", \"+ address.unit +\", \"+ address.city +\", \"+ address.state + \", \"+ address.zipcode\n\t\t  \t\t\t\n\t\t  \t\tlet newLocation = {\n\t\t  \t\t\tlocation : loc,\n\t\t  \t\t\tid : this.state.locations.length\n\t\t  \t\t}\n\n\t\t  \t\tthis.setState((prevState)=>({\n\t\t  \t\t\tlocations : [...prevState.locations, newLocation]\n\t\t  \t\t}))\n\n\t\t  \t\tthis.setState({\n\t\t  \t\t\tnewLocation : ''\n\t\t  \t\t});\n\t  \t\t}\n\t  }\n\n\t  addQuestionnaireHandler = (event) =>{\n\t  \t\tif(this.state.newQuestion==''){\n\t  \t\t\t//show modal\n\t  \t\t}else{\n\t\t  \t\tlet newQuestion = {\n\t\t  \t\t\tquestion : this.state.newQuestionnaire, \n\t\t  \t\t\tid : this.state.questionnaire.length\n\t\t  \t\t}\n\n\t\t  \t\tthis.setState((prevState)=>({\n\t\t  \t\t\tquestionnaire : [...prevState.questionnaire, newQuestion]\n\t\t  \t\t}));\n\n\t\t  \t\tthis.setState({\n\t\t  \t\t\tnewQuestionnaire : ''\n\t\t  \t\t});\n\t  \t\t}\n\t  }\n\n\t  removeQuestionnaireHandler = (event) =>{\n  \t\t\tconst removedList = this.state.questionnaire.filter(ele=>{return ele.id != event.target.name});\n\t\t  \tthis.setState((prevState)=>({\n\t\t  \t\tquestionnaire : removedList\t\t\n\t\t  \t}));\n\t  }\n\n\t  removeLocationHandler = (event) =>{\n\n  \t\t\tconst removedList = this.state.locations.filter(ele=>{return ele.id != event.target.name});\n\t\t  \tthis.setState((prevState)=>({\n\t\t  \t\tlocations : removedList\t\t\n\t\t  \t}));\n\t  }\n\n\n\t  handleSubmit = (event) =>{\n\t  \t\tconst campaign = {\n\t\t  \t\tcampaignTitle : this.state.campaignTitle,\n\t\t\t\tmanagers : this.state.managers,\n\t\t\t\tstartDate : this.state.startDate._d.toDateString(),\n\t\t\t\tendDate : this.state.endDate._d.toDateString(),\n\t\t\t\ttalkingPoint : this.state.talkingPoint,\n\t\t\t\tquestionnaire : this.state.questionnaire,\n\t\t\t\tlocations : this.state.locations,\n\t\t\t\tduration : this.state.visitHour+\"H \"+this.state.visitMin+\"M\",\n\t\t\t\tid : this.state.id \n\t\t\t}\n\n\t  \t\t//If I use push it generates auto key\n\t  \t\t//axios.push ('/campaigns.json', campaign).then( response => {\n\t  \t\tconsole.log('[[Hi]',this.state.id);\n\t  \t\taxios.put('/campaigns/'+this.state.id+'.json/', campaign).then( response => {\n\n           \t\tconsole.log(\"campaignCreated\", campaign, \"response : \", response);\n           \t\tthis.props.signedin();\n            })\n            .catch( error => {\n                console.log(\"Error\", error);\n            });\n\n            axios.put('/managers/0/campaigns/'+this.state.id+'.json/',JSON.stringify(this.state.id)).then( response => {\n\n           \t\tconsole.log(\"addCampaignToManager\");\n           \t\t\n            })\n            .catch( error => {\n                console.log(\"Error\", error);\n            });\n\n\n            // axios.put('/campaigns/length', this.state.id+1).then( response => {\n\n           \t// \tconsole.log(\"id is increased\");\n           \t\t\n            // })\n            // .catch( error => {\n            //     console.log(\"Error\", error);\n            // });\n\n\n\t  }\n\n\t  componentDidMount(){;\n\t  \tconsole.log(['Create Campaign Did Mount']);\n\t  \t\n\t  \tlet x = null\n\t  \taxios.get('https://cse308-de3df.firebaseio.com/campaigns.json').then(response=>{\n\t  \t\tx= response.data\n\t  \t\t\n\n\t  \t\tif(x!=null){\n\t  \t\t\tconsole.log(x.length)\n\t  \t\t\tlet lastID = x[x.length-1].id\n\t  \t\t\tthis.setState({id : lastID+1})\n\t  \t\t}else{\n\t  \t\t\tthis.setState({id : 0})\n\t  \t\t}\n\t  \t});\t  \t\n\t  \t// \tconsole.log('Fail');\n\t  \t// })\n\t  }\n\n\trender(){\n\t\tconsole.log(['Create Campaign Render']);\n\t\treturn(\n\t\t\t<div className='container'>\n\t\t\t\t\t\n\t\t\t\t\t<PageHead title='Create Campaign'/>\n\t\t\t\t\t<CampaignTitle  campaignTitle = {this.state.campaignTitle} \n\t\t\t\t\t\tonChange = {(event) => this.handleInputChange(event)}/>\n\t\t\t\t\t<AddManager onChange = {(event) => this.handleInputChange(event)} onClick = {(event)=>this.addManagerHandler(event)}  \n\t\t\t\t\t\tmanager = {this.state.newManager}/>\n\t\t\t\t\t<AddedManagers managers = {this.state.managers}/>\n\t\t\t\t\t\n\t\t\t\t\t<DateSection name = 'startDate' date = {this.state.startDate} onChange = {this.handleStartDateChange}/>\n\t\t\t\t\t<DateSection name = 'endDate' date = {this.state.endDate} onChange = {this.handleEndDateChange}/>\n\t\t\t\t\t<TalkingPoint talkingPoint = {this.state.talkingPoint} onChange = {(event) => this.handleInputChange(event)}/>\n\t\t\t\t\t<CreateQNR questionnaire={this.state.newQuestionnaire} onChange={(event)=>this.handleInputChange(event)}\n\t\t\t\t\t\tonClick = {(event)=>this.addQuestionnaireHandler(event)}/>\n\t\t\t\t\t<AddedQuestionnaire questionnaire = {this.state.questionnaire} onClick={this.removeQuestionnaireHandler}/>\n\t\t\t\t\t<AddLocation location={this.state.newLocation} onChange={this.handleInputChange}\n\t\t\t\t\t\t\tonClick = {(event)=>this.addLocationHandler(event)}/>\n\t\t\t\t\t<AddedLocation locations = {this.state.locations}  onClick = {this.removeLocationHandler}/>\n\t\t\t\t\t<VisitDuration visitHour = {this.state.visitHour} visitMin = {this.state.visitMin} onChange = {(event) => this.handleInputChange(event)}/>\n\t\t\t\t\t\n\t\t\t\t\t<form>\n\t\t\t\t\t<div className = {classes.Btn}>\n\t\t\t\t\t\t<button className=\"btn btn-dark\" onClick={this.handleSubmit}>Submit</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\n\t\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default CreateCampaign;"]},"metadata":{},"sourceType":"module"}